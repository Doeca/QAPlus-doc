# 拓展CQ码
> 插件基于原有的CQ码，进一步拓展了其功能范围，以实现更多功能。<br>
> 这实际上是插件功能的核心，基于此系统，可以实现概率回复，条件回复，关键词禁言等简易功能<br>
> 在**示例**章节中，会详细讲解如何使用拓展CQ码实现复杂的功能

## 原生CQ码

!> 这是酷Q内部定义的图片、语音等CQ码，详细可以查看 [酷Q文库](https://cqp.im/cqcode)


## 零优先级CQ码
> 此处的CQ码会优先替换为相关数据，执行相关功能

CQ码 | 说明 
:-: | :-: 
[CQ:at] | 提及对方
[CQ:ac] | 发送者账号
[CQ:nick] | 发送者群名片
[CQ:name] | 发送者QQ昵称
[CQ:gc] | 来源群群号
[CQ:split] | 分割回复文本段，随机返回其中一条
[CQ:info,type=x] | 发送者的相关信息
[CQ:regex,id=x] | 正则词条的回复，其中x为Group序号
[CQ:time,type=x] | 获取时间信息
[CQ:rand,min=0,max=100] | 一个随机数


## 功能型CQ码
> 使用此类CQ码可实现一些简易的功能

!> 需要注意的是，功能型CQ码不可以嵌套使用（虽然也不知道怎么能嵌套使用）

CQ码 | 说明 
:-: | :-: 
[CQ:delete] | 撤回来源消息
[CQ:ban,time=60] | 禁言消息发送者，time单位为分钟
[CQ:kick,black=true] | 踢出消息发送者，black代表是否拉黑
[CQ:like,times=10] | 发送名片赞，times为名片赞个数
[CQ:read,key=str] | 读取一个键值表
[CQ:write,key=str,value=str] | 写一个键值表（酷Q重启后数据不会被清空），可在左侧列表中查阅具体使用方法
[CQ:file] | 读取本地文件或网络地址（会根据文件后缀名或Content-Type自动判断数据格式）
[CQ:noreply] | 拦截消息，不再让后续插件处理消息
[CQ:block] | 拦截处理，不再让后续词条匹配消息

?> 对于delete，ban，kick，like，其CQ码中可以支持gc、ac、id等特殊参数，可在左侧列表中查阅具体使用方法

## 条件型CQ码
> 使用此类CQ码可做到按规则过滤回复

CQ码 | 说明 
:-: | :-: 
[CQ:ignore,chance=90] | 概率忽略消息，chance取值0-100
[CQ:condition,*] | 复杂的条件判断，可看左侧对应章节

## 特殊事件CQ码
> 这里的CQ码用于实现事件系统

CQ码 | 说明 
:-: | :-: 
[CQ:event,type=x] | 特殊事件，具体可在左侧列表中查阅具体使用方法
[CQ:responseFlag] | 特殊事件的请求标记<br>酷Q通过这个参数来判断操作的是哪个事件
[CQ:agree,flag=str] | 同意相关事件
[CQ:refuse,flag=str] | 拒绝相关事件


### 特殊事件CQ码的原理
酷Q的事件会以CQ码的形式去词条中匹配回复，以执行相应的功能

## 后记
**为何不制作可以嵌套的功能型CQ码？**

让CQ码支持嵌套使用是可以实现的，但这与本插件的理念不符，插件追求简约高效，同时提供一定程度的进阶功能。CQ码的嵌套使用在处理上会消耗更多的时间